DROP DATABASE IF EXISTS bookstore;
CREATE DATABASE bookstore;
USE bookstore;

DROP TABLE IF EXISTS USERS;
CREATE TABLE USERS (
    User_ID CHAR(8),
    User_NAME VARCHAR(50), 
    User_Phone_NUM CHAR(10), 
    User_Email VARCHAR(50), 
    User_Password VARCHAR(50) NOT NULL, 
    User_Is_Manager BOOL,
    User_Is_Customer BOOL, 
    VIP_Status BOOL,
    PRIMARY KEY(User_ID)
);

DROP TABLE IF EXISTS SYSTEM_MANAGER;
CREATE TABLE SYSTEM_MANAGER (
    Manager_ID CHAR(8),
    User_ID CHAR(8),
    PRIMARY KEY(Manager_ID),
    FOREIGN KEY(User_ID) REFERENCES USERS (User_ID)
);

DROP TABLE IF EXISTS BOOK;
CREATE TABLE BOOK (
    Book_ID CHAR(8), 
    Book_Title VARCHAR(50), 
    Book_Edition_Type VARCHAR(50), 
    Book_Author VARCHAR(50), 
    Book_Price INT, 
    Date_of_Publication DATE,
    PRIMARY KEY(Book_ID)
);

DROP TABLE IF EXISTS COUPON;
CREATE TABLE COUPON (
    Coupon_ID CHAR(8), 
    Coupon_Code CHAR(8), 
    Coupon_Type VARCHAR(50), 
    Coupon_Due_Date DATE, 
    Coupon_Detail VARCHAR(100),
    PRIMARY KEY(Coupon_ID)
);

DROP TABLE IF EXISTS SHIPPING;
CREATE TABLE SHIPPING (
    Shipping_ID CHAR(8), 
    Shipping_Method VARCHAR(50), 
    Shipping_Address VARCHAR(100),
    Addressee_Name VARCHAR(30),
    Addressee_Phone_NUM CHAR(10), 
    PRIMARY KEY(Shipping_ID)
);

DROP TABLE IF EXISTS BILL;
CREATE TABLE BILL (
    Bill_ID CHAR(8), 
    Coupon_ID CHAR(8), 
    Shipping_ID CHAR(8), 
    Bill_Price INT, 
    Payment_Method VARCHAR(50), 
    Invoice_Method VARCHAR(50),
    Credit_Card VARCHAR(30),
    PRIMARY KEY(Bill_ID),
    FOREIGN KEY(Coupon_ID) REFERENCES COUPON(Coupon_ID),
    FOREIGN KEY(Shipping_ID) REFERENCES SHIPPING(Shipping_ID)
);

DROP TABLE IF EXISTS ORDERS ;
CREATE TABLE ORDERS (
    Order_ID CHAR(8), 
    User_ID CHAR(8), 
    Bill_ID CHAR(8), 
    Book_ID CHAR(8), 
    Order_Time DATETIME, 
    Total_Amount INT,
    PRIMARY KEY(Order_ID),
    FOREIGN KEY(User_ID) REFERENCES USERS(User_ID),
    FOREIGN KEY(Bill_ID) REFERENCES BILL(Bill_ID),
    FOREIGN KEY(Book_ID) REFERENCES BOOK(Book_ID)
);

DROP TABLE IF EXISTS INVENTORY;
CREATE TABLE INVENTORY (
    Inventory_ID CHAR(8), 
    Book_ID CHAR(8), 
    Book_Quantity INT, 
    Inventory_Date DATE,
    PRIMARY KEY(Inventory_ID),
    FOREIGN KEY(Book_ID) REFERENCES BOOK(Book_ID)
);

DROP TABLE IF EXISTS CART;
CREATE TABLE CART (
    Cart_ID CHAR(8),
    User_ID CHAR(8), 
    Book_ID CHAR(8), 
    Cart_Book_Quantity INT, 
    PRIMARY KEY(Cart_ID),
    FOREIGN KEY(User_ID) REFERENCES USERS(User_ID),
    FOREIGN KEY(Book_ID) REFERENCES BOOK(Book_ID)
);



/*data insert*/

/*user*/
INSERT INTO USERS VALUES('00000001','Abe','0200000001','Abe@gmail.com','00000001','1','0','0');
INSERT INTO USERS VALUES('10000002','Abraham','0210000002','Abraham@gmail.com','10000002','0','1','0');
INSERT INTO USERS VALUES('10000003','Adolf','0210000003','Adolf@gmail.com','10000003','0','1','0');
INSERT INTO USERS VALUES('10000004','Alexis','0210000004','Alexis@gmail.com','10000004','0','1','0');
INSERT INTO USERS VALUES('10000005','Adrian','0210000005','Adrian@gmail.com','10000005','0','1','0');

/*book*/
INSERT INTO BOOK VALUES('30000001','book1','1','author1','100','2023-1-1');
INSERT INTO BOOK VALUES('30000002','book2','2','author2','200','2023-1-2');
INSERT INTO BOOK VALUES('30000003','book3','3','author3','300','2023-1-3');
INSERT INTO BOOK VALUES('30000004','book4','4','author4','400','2023-1-4');
INSERT INTO BOOK VALUES('30000005','book5','5','author5','500','2023-1-5');
INSERT INTO BOOK VALUES('30000006','book6','6','author6','600','2023-1-6');
INSERT INTO BOOK VALUES('30000007','book7','7','author7','700','2023-1-7');
INSERT INTO BOOK VALUES('30000008','book8','8','author8','800','2023-1-8');
INSERT INTO BOOK VALUES('30000009','book9','9','author9','900','2023-1-9');
INSERT INTO BOOK VALUES('30000010','book10','10','author10','1000','2023-1-10');
INSERT INTO BOOK VALUES('30000011','book11','11','author11','1100','2023-1-11');
INSERT INTO BOOK VALUES('30000012','book12','12','author12','1200','2023-1-12');
INSERT INTO BOOK VALUES('30000013','book13','13','author13','1300','2023-1-13');
INSERT INTO BOOK VALUES('30000014','book14','14','author14','1400','2023-1-14');
INSERT INTO BOOK VALUES('30000015','book15','15','author15','1500','2023-1-15');
INSERT INTO BOOK VALUES('30000016','book16','16','author16','1600','2023-1-16');
INSERT INTO BOOK VALUES('30000017','book17','17','author17','1700','2023-1-17');
INSERT INTO BOOK VALUES('30000018','book18','18','author18','1800','2023-1-18');
INSERT INTO BOOK VALUES('30000019','book19','19','author19','1900','2023-1-19');
INSERT INTO BOOK VALUES('30000020','book20','20','author20','2000','2023-1-20');
INSERT INTO BOOK VALUES('30000021','book21','21','author21','2100','2023-1-21');
INSERT INTO BOOK VALUES('30000022','book22','22','author22','2200','2023-1-22');
INSERT INTO BOOK VALUES('30000023','book23','23','author23','2300','2023-1-23');
INSERT INTO BOOK VALUES('30000024','book24','24','author24','2400','2023-1-24');
INSERT INTO BOOK VALUES('30000025','book25','25','author25','2500','2023-1-25');
INSERT INTO BOOK VALUES('30000026','book26','26','author26','2600','2023-1-26');
INSERT INTO BOOK VALUES('30000027','book27','27','author27','2700','2023-1-27');
INSERT INTO BOOK VALUES('30000028','book28','28','author28','2800','2023-1-28');
INSERT INTO BOOK VALUES('30000029','book29','29','author29','2900','2023-1-29');
INSERT INTO BOOK VALUES('30000030','book30','30','author30','3000','2023-1-30');
/*coupon*/
INSERT INTO COUPON VALUES('40000001','TK888','0.8','2023-12-1','coupon description1');
INSERT INTO COUPON VALUES('40000002','VIP666','0.9','2023-12-2','coupon description2');


/*shipping*/
INSERT INTO SHIPPING VALUES('50000001','delivery1','addr1','Abe','0200000001');
INSERT INTO SHIPPING VALUES('50000002','delivery2','addr2','Alexis','0200000001');
INSERT INTO SHIPPING VALUES('50000003','delivery3','addr3','Alexis','0200000001');
INSERT INTO SHIPPING VALUES('50000004','delivery4','addr4','Alexis','0200000001');
INSERT INTO SHIPPING VALUES('50000005','delivery5','addr5','Alexis','0200000001');

/*bill*/
INSERT INTO BILL VALUES('60000002','40000001','50000002','200','pay2','inv2','credit222');
INSERT INTO BILL VALUES('60000003','40000002','50000003','300','pay3','inv3','credit333');
INSERT INTO BILL VALUES('60000004','40000001','50000004','400','pay4','inv4','credit444');
INSERT INTO BILL VALUES('60000005','40000002','50000005','500','pay5','inv5','credit555');

/*order*/
INSERT INTO ORDERS VALUES('70000002','10000002','60000002','30000006','2023-7-2','2');
INSERT INTO ORDERS VALUES('70000003','10000003','60000003','30000006','2023-7-3','3');
INSERT INTO ORDERS VALUES('70000004','10000004','60000004','30000006','2023-7-4','4');
INSERT INTO ORDERS VALUES('70000005','10000005','60000005','30000006','2023-7-5','5');

/*inventory*/
INSERT INTO INVENTORY VALUES('80000001','30000001','10','2023-5-1');
INSERT INTO INVENTORY VALUES('80000002','30000002','20','2023-5-2');
INSERT INTO INVENTORY VALUES('80000003','30000003','30','2023-5-3');
INSERT INTO INVENTORY VALUES('80000004','30000004','40','2023-5-4');
INSERT INTO INVENTORY VALUES('80000005','30000005','50','2023-5-5');
INSERT INTO INVENTORY VALUES('80000006','30000006','60','2023-5-6');
INSERT INTO INVENTORY VALUES('80000007','30000007','70','2023-5-7');
INSERT INTO INVENTORY VALUES('80000008','30000008','80','2023-5-8');
INSERT INTO INVENTORY VALUES('80000009','30000009','90','2023-5-9');
INSERT INTO INVENTORY VALUES('80000010','30000010','100','2023-5-10');
INSERT INTO INVENTORY VALUES('80000011','30000011','110','2023-5-11');
INSERT INTO INVENTORY VALUES('80000012','30000012','120','2023-5-12');
INSERT INTO INVENTORY VALUES('80000013','30000013','130','2023-5-13');
INSERT INTO INVENTORY VALUES('80000014','30000014','140','2023-5-14');
INSERT INTO INVENTORY VALUES('80000015','30000015','150','2023-5-15');
INSERT INTO INVENTORY VALUES('80000016','30000016','160','2023-5-16');
INSERT INTO INVENTORY VALUES('80000017','30000017','170','2023-5-17');
INSERT INTO INVENTORY VALUES('80000018','30000018','180','2023-5-18');
INSERT INTO INVENTORY VALUES('80000019','30000019','190','2023-5-19');
INSERT INTO INVENTORY VALUES('80000020','30000020','200','2023-5-20');
INSERT INTO INVENTORY VALUES('80000021','30000021','210','2023-5-21');
INSERT INTO INVENTORY VALUES('80000022','30000022','220','2023-5-22');
INSERT INTO INVENTORY VALUES('80000023','30000023','230','2023-5-23');
INSERT INTO INVENTORY VALUES('80000024','30000024','240','2023-5-24');
INSERT INTO INVENTORY VALUES('80000025','30000025','250','2023-5-25');
INSERT INTO INVENTORY VALUES('80000026','30000026','260','2023-5-26');
INSERT INTO INVENTORY VALUES('80000027','30000027','270','2023-5-27');
INSERT INTO INVENTORY VALUES('80000028','30000028','280','2023-5-28');
INSERT INTO INVENTORY VALUES('80000029','30000029','290','2023-5-29');
INSERT INTO INVENTORY VALUES('80000030','30000030','300','2023-5-30');


/*system_manager*/
INSERT INTO SYSTEM_MANAGER VALUES('00000001','00000001');

/*cart*/
INSERT INTO CART VALUES('90000001','00000001','30000001','1');
INSERT INTO CART VALUES('90000002','00000001','30000002','2');